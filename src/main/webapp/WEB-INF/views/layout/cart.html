<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/cart.css}">
    <title>Giỏ Hàng</title>
    <link rel="import" th:href="@{../../header.html}">
    <link rel="import" th:href="@{../../footer.html}">
    <link rel="stylesheet" th:href="@{/css/header.css}" />
    <link rel="stylesheet" th:href="@{/css/footer.css}" />
</head>
<body>
<div th:replace="header :: header"></div>

<h1>Giỏ Hàng</h1>

<table class="cart-table">
    <thead>
    <tr>
        <th>Số thứ tự</th>
        <th>Hình ảnh</th>
        <th>Tên sản phẩm</th>
        <th>Số lượng</th>
        <th>Đơn giá</th>
        <th>Tổng tiền</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="item, iterStat : ${cartItems}">
        <td th:text="${iterStat.index + 1}">1</td>
        <td>
            <img th:src="${item.image}" alt="Product Image" style="width: 100px; height: auto;">
        </td>
        <td th:text="${item.name}">Tên sản phẩm</td>
        <td>
            <form th:action="@{/cart/update}" method="post">
                <input type="hidden" name="productId" th:value="${item.id}" />
                <input type="number" name="quantity" th:value="${item.quantity}" min="1" onchange="this.form.submit()">
            </form>
        </td>
        <td th:text="${item.formattedUnitPrice}">Giá sản phẩm</td>
        <td th:text="${item.formattedTotalPrice}">Tổng tiền</td>
    </tr>
    </tbody>
</table>

<div class="cart-summary">
    <p th:text="'Tổng số tiền: ' + ${totalFormattedPrice}">Tổng số tiền</p>
    <form th:action="@{/checkout}" method="get">
        <button class="btn-checkout" type="submit">Thanh toán</button>
    </form>
</div>

<div th:replace="footer :: footer"></div>
</body>
</html>
